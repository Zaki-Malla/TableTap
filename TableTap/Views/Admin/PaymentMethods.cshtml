@model List<PaymentMethodModel>

<body>
    <div class="dashboard-wrapper">
        @await Html.PartialAsync("_AdminSidebar")

        <main class="dashboard-main">
            <div class="dashboard-header">
                <h1>@SharedResource.manage_payment_methods</h1>
                <p>@SharedResource.configure_available_methods</p>
            </div>

            <div class="admin-actions">
                <div class="search-filter">
                    <div class="search-box">
                        <input type="text" placeholder="@SharedResource.search_payment_methods">
                        <button class="search-btn"><i class="fas fa-search"></i></button>
                    </div>
                    <div class="filter-box">
                        <select>
                            <option value="">@SharedResource.all_types_option</option>
                            <option value="card">Credit Cards</option>
                            <option value="bank">Bank Transfers</option>
                            <option value="wallet">Digital Wallets</option>
                        </select>
                    </div>
                </div>
                <button class="btn btn-primary"><i class="fas fa-plus"></i>@SharedResource.add_payment_method_button</button>
            </div>

            <div class="payment-methods-grid">
                <div class="card payment-method-card">
                    <div class="card-header">
                        <div class="payment-method-icon">
                            <i class="fas fa-credit-card"></i>
                        </div>
                        <h3>Credit & Debit Cards</h3>
                        <span class="status-badge active">Active</span>
                    </div>
                    <div class="card-content">
                        <p>Accept all major credit and debit cards for subscription payments.</p>
                        <ul class="payment-method-list">
                            <li><span class="payment-brand">Visa</span></li>
                            <li><span class="payment-brand">Mastercard</span></li>
                            <li><span class="payment-brand">American Express</span></li>
                            <li><span class="payment-brand">Discover</span></li>
                            <li><span class="payment-brand">JCB</span></li>
                            <li><span class="payment-brand">Diners Club</span></li>
                        </ul>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-outline btn-sm">Edit</button>
                        <button class="btn btn-outline btn-sm btn-danger">Disable</button>
                    </div>
                </div>

                <div class="card payment-method-card">
                    <div class="card-header">
                        <div class="payment-method-icon">
                            <i class="fas fa-university"></i>
                        </div>
                        <h3>Bank Transfers</h3>
                        <span class="status-badge active">Active</span>
                    </div>
                    <div class="card-content">
                        <p>Direct bank transfers are available for annual subscriptions.</p>
                        <ul class="payment-method-list">
                            <li><span class="payment-brand">ACH (US)</span></li>
                            <li><span class="payment-brand">SEPA (Europe)</span></li>
                            <li><span class="payment-brand">Wire Transfers</span></li>
                            <li><span class="payment-brand">Direct Debit</span></li>
                        </ul>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-outline btn-sm">Edit</button>
                        <button class="btn btn-outline btn-sm btn-danger">Disable</button>
                    </div>
                </div>

                <div class="card payment-method-card">
                    <div class="card-header">
                        <div class="payment-method-icon">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <h3>Digital Wallets</h3>
                        <span class="status-badge active">Active</span>
                    </div>
                    <div class="card-content">
                        <p>Convenient payment options through popular digital wallets.</p>
                        <ul class="payment-method-list">
                            <li><span class="payment-brand">PayPal</span></li>
                            <li><span class="payment-brand">Apple Pay</span></li>
                            <li><span class="payment-brand">Google Pay</span></li>
                            <li><span class="payment-brand">Stripe</span></li>
                        </ul>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-outline btn-sm">Edit</button>
                        <button class="btn btn-outline btn-sm btn-danger">Disable</button>
                    </div>
                </div>

                <div class="card payment-method-card">
                    <div class="card-header">
                        <div class="payment-method-icon">
                            <i class="fas fa-money-bill"></i>
                        </div>
                        <h3>Cryptocurrency</h3>
                        <span class="status-badge inactive">Inactive</span>
                    </div>
                    <div class="card-content">
                        <p>Accept cryptocurrency payments for subscriptions.</p>
                        <ul class="payment-method-list">
                            <li><span class="payment-brand">Bitcoin</span></li>
                            <li><span class="payment-brand">Ethereum</span></li>
                            <li><span class="payment-brand">Litecoin</span></li>
                            <li><span class="payment-brand">USD Coin</span></li>
                        </ul>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-outline btn-sm">Edit</button>
                        <button class="btn btn-outline btn-sm btn-success">Enable</button>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <div class="modal" id="paymentMethodModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>@SharedResource.add_payment_method_button</h2>
                <button class="modal-close"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <form asp-controller="Admin" asp-action="AddPaymentMethod" method="post" id="paymentMethodForm" class="admin-form">
                    <div class="form-group">
                        <label for="MethodName">@SharedResource.method_name_label</label>
                        <input type="text" id="MethodName" name="MethodName" class="form-control" placeholder="@SharedResource.enter_method_name_placeholder" required>
                        @if (!string.IsNullOrEmpty(ViewData["MethodNameError"]?.ToString()))
                        {
                            <span class="error-text">@ViewData["MethodNameError"]</span>
                        }
                    </div>
                    <div class="form-group">
                        <label for="Type">@SharedResource.type</label>
                        <select id="Type" name="Type" class="form-control" required>
                            <option value="">@SharedResource.select_type</option>
                            <option value="cash">@SharedResource.cash</option>
                            <option value="bank">@SharedResource.BankTransfer</option>
                            <option value="creditcard">@SharedResource.CreditCard</option>
                            <option value="debitcard">@SharedResource.DebitCard</option>
                            <option value="mobilewallet">@SharedResource.MobileWallet</option>
                            <option value="paypal">@SharedResource.PayPal</option>
                            <option value="stripe">@SharedResource.Stripe</option>
                            <option value="crypto">@SharedResource.Cryptocurrency</option>
                            <option value="payeer">@SharedResource.Payeer</option>
                            <option value="other">@SharedResource.Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="IsActive">@SharedResource.Status</label>
                        <select id="IsActive" name="IsActive" class="form-control">
                            <option value="true">@SharedResource.active_status</option>
                            <option value="false">@SharedResource.inactive_status</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="Description">@SharedResource.Description</label>
                        <textarea id="Description" name="Description" required class="form-control" placeholder="@SharedResource.enter_method_description_placeholder"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline modal-close">@SharedResource.cancel</button>
                        <button type="submit" class="btn btn-primary">@SharedResource.save_method</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <script>
        const editButtons = document.querySelectorAll('.card-footer .btn:first-child');
        const addButton = document.querySelector('.admin-actions .btn-primary');
        const modal = document.getElementById('paymentMethodModal');
        const modalClose = document.querySelector('.modal-close');
        const cancelButton = document.querySelector('.modal-footer .btn-outline');

        function openModal() {
          modal.classList.add('active');
        }

        function closeModal() {
          modal.classList.remove('active');
        }

        editButtons.forEach(button => {
          button.addEventListener('click', openModal);
        });

        addButton.addEventListener('click', openModal);
        modalClose.addEventListener('click', closeModal);
        cancelButton.addEventListener('click', closeModal);

        window.addEventListener('click', (e) => {
          if (e.target === modal) {
            closeModal();
          }
        });
    </script>
</body>
