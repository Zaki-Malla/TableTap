@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<style>
    #table-pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 1rem;
        margin-top: 1rem;
    }

        #table-pagination .pagination-btn {
            padding: 0.5rem 1rem;
            border: 1px solid #ccc;
            background-color: #007bff;
            color: #fff;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

            #table-pagination .pagination-btn:hover:not(:disabled) {
                background-color: #0056b3;
            }

            #table-pagination .pagination-btn:disabled {
                background-color: #e0e0e0;
                color: #888;
                cursor: not-allowed;
            }
</style>

<body>
    <div class="dashboard-wrapper">
        @await Html.PartialAsync("_AdminSidebar")
    <!-- Main Content -->
        <main class="dashboard-main">
            <div class="dashboard-header">
                <h1>Manage Restaurants</h1>
                <p>View and manage all restaurants on the platform.</p>
            </div>

            <div class="admin-actions">
                <div class="search-filter">
                    <div class="search-box">
                        <input type="text" placeholder="Search restaurants..." class="restaurant-search">
                        <button class="search-btn"><i class="fas fa-search"></i></button>
                    </div>
                    <div class="filter-box">
                        <select class="plan-filter">
                            <option value="">All Plans</option>
                            <option value="starter">Starter</option>
                            <option value="professional">Professional</option>
                            <option value="enterprise">Enterprise</option>
                        </select>
                        <select class="status-filter">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="pending">Pending</option>
                            <option value="suspended">Suspended</option>
                        </select>
                    </div>
                </div>
                <button class="btn btn-primary"><i class="fas fa-plus"></i> Add Restaurant</button>
            </div>

            <div class="card">
                <div class="card-content">
                    <div class="table-responsive">
                        <table class="admin-table" id="order-listing">
                            <thead>
                                <tr>
                                    <th>Restaurant</th>
                                    <th>Owner</th>
                                    <th>Location</th>
                                    <th>Plan</th>
                                    <th>Status</th>
                                    <th>QR Codes</th>
                                    <th>Menu Views</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>

                                <tr class="data-row">
                                    <td>
                                        <div class="restaurant-info">
                                            <img src="https://placehold.co/50" alt="Restaurant" class="restaurant-img">
                                            <div>
                                                <div class="restaurant-name">Pasta Paradise</div>
                                                <div class="restaurant-id">ID: #12345</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>John Smith</td>
                                    <td>New York, US</td>
                                    <td><span class="plan-badge professional">Professional</span></td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td>24</td>
                                    <td>1,248</td>
                                    <td class="actions">
                                        <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                        <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                        <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr class="data-row">
                                    <td>
                                        <div class="restaurant-info">
                                            <img src="https://placehold.co/50" alt="Restaurant" class="restaurant-img">
                                            <div>
                                                <div class="restaurant-name">Burger Bistro</div>
                                                <div class="restaurant-id">ID: #12346</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>Sarah Johnson</td>
                                    <td>Los Angeles, US</td>
                                    <td><span class="plan-badge starter">Starter</span></td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td>12</td>
                                    <td>876</td>
                                    <td class="actions">
                                        <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                        <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                        <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr class="data-row">
                                    <td>
                                        <div class="restaurant-info">
                                            <img src="https://placehold.co/50" alt="Restaurant" class="restaurant-img">
                                            <div>
                                                <div class="restaurant-name">Sushi Supreme</div>
                                                <div class="restaurant-id">ID: #12347</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>David Lee</td>
                                    <td>Tokyo, JP</td>
                                    <td><span class="plan-badge enterprise">Enterprise</span></td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td>48</td>
                                    <td>3,542</td>
                                    <td class="actions">
                                        <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                        <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                        <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr class="data-row">
                                    <td>
                                        <div class="restaurant-info">
                                            <img src="https://placehold.co/50" alt="Restaurant" class="restaurant-img">
                                            <div>
                                                <div class="restaurant-name">Taco Time</div>
                                                <div class="restaurant-id">ID: #12348</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>Maria Garcia</td>
                                    <td>Mexico City, MX</td>
                                    <td><span class="plan-badge professional">Professional</span></td>
                                    <td><span class="status-badge pending">Pending</span></td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td class="actions">
                                        <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                        <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                        <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr class="data-row">
                                    <td>
                                        <div class="restaurant-info">
                                            <img src="https://placehold.co/50" alt="Restaurant" class="restaurant-img">
                                            <div>
                                                <div class="restaurant-name">Pizza Palace</div>
                                                <div class="restaurant-id">ID: #12349</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>Robert Wilson</td>
                                    <td>Rome, IT</td>
                                    <td><span class="plan-badge starter">Starter</span></td>
                                    <td><span class="status-badge suspended">Suspended</span></td>
                                    <td>8</td>
                                    <td>432</td>
                                    <td class="actions">
                                        <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                        <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                        <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="table-pagination" class="pagination">
                        <button id="prevPage" class="pagination-btn"><i class="fas fa-chevron-left"></i></button>
                       
                        <button id="nextPage" class="pagination-btn"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Sidebar toggle
        const sidebarToggle = document.querySelector('.sidebar-toggle');
        const dashboardWrapper = document.querySelector('.dashboard-wrapper');

        sidebarToggle.addEventListener('click', () => {
          dashboardWrapper.classList.toggle('sidebar-collapsed');
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
                   const searchInput = document.querySelector('.restaurant-search');
                   const planSelect = document.querySelector('.plan-filter');
                   const statusSelect = document.querySelector('.status-filter');
                   const tableRows = document.querySelectorAll('#order-listing tbody tr');

            function normalize(text) {
                return text.toLowerCase().trim();
            }

            function filterTable() {
                const searchTerm = normalize(searchInput.value);
                const selectedPlan = normalize(planSelect.value);
                const selectedStatus = normalize(statusSelect.value);

                tableRows.forEach(row => {
                    const name = normalize(row.querySelector('.restaurant-name').textContent);
                    const plan = normalize(row.querySelector('.plan-badge').textContent);
                    const status = normalize(row.querySelector('.status-badge').textContent);

                    const matchesSearch = name.includes(searchTerm);
                    const matchesPlan = !selectedPlan || plan === selectedPlan;
                    const matchesStatus = !selectedStatus || status === selectedStatus;

                    if (matchesSearch && matchesPlan && matchesStatus) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
            }

            searchInput.addEventListener('input', filterTable);
            planSelect.addEventListener('change', filterTable);
            statusSelect.addEventListener('change', filterTable);
        });
    </script>
    <script>
        const rowsPerPage = 5; // Number of rows per page
        const table = document.getElementById("order-listing");
        const rows = table.querySelectorAll("tbody tr");
        const prevBtn = document.getElementById("prevPage");
        const nextBtn = document.getElementById("nextPage");
        const pageIndicator = document.getElementById("page-indicator");

        let currentPage = 1;
        const totalPages = Math.ceil(rows.length / rowsPerPage);

        function showPage(page) {
          const start = (page - 1) * rowsPerPage;
          const end = start + rowsPerPage;

          rows.forEach((row, index) => {
            row.style.display = index >= start && index < end ? "" : "none";
          });

          pageIndicator.textContent = `Page ${page}`;
          prevBtn.disabled = page === 1;
          nextBtn.disabled = page === totalPages;
        }

        prevBtn.addEventListener("click", () => {
          if (currentPage > 1) {
            currentPage--;
            showPage(currentPage);
          }
        });

        nextBtn.addEventListener("click", () => {
          if (currentPage < totalPages) {
            currentPage++;
            showPage(currentPage);
          }
        });

        // Initial render
        showPage(currentPage);
    </script>

</body>
